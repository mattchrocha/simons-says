(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{110:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),c=n(46),r=n.n(c),s=(n(53),n(6)),u=n(8),i=n(10),l=n(9),m=n(11),d=(n(55),n(113)),h=n(114),b=n(20),f=n.n(b),g=(n(87),function(){var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e"];return function(t){for(var n=0;n<6;n++){var o=Math.round(14*Math.random());t+=e[o]}return t}("#")}),p=function(e){function t(e){var n;return Object(s.a)(this,t),console.log("prueba"),console.log(e),(n=Object(i.a)(this,Object(l.a)(t).call(this,e))).submitTap=function(){n.socket.emit("sequence",n.state.id)},n.onFailure=function(){var e=document.getElementsByClassName("screenbutton")[0];e.setAttribute("style","background-color: red; opacity: 1"),setTimeout(function(){e.setAttribute("style","transition: background-color 2s, opacity 2s; background-color: ".concat(n.state.bgcolor))},1e3)},n.onSuccess=function(){var e=document.getElementsByClassName("screenbutton")[0];e.setAttribute("style","opacity: 1;  background-color: ".concat(n.state.bgcolor)),setTimeout(function(){e.setAttribute("style","transition: opacity 1s; background-color: ".concat(n.state.bgcolor))},300)},n.onRound=function(){var e=document.getElementsByClassName("screenbutton")[0];e.setAttribute("style","background-color: green; opacity: 1"),setTimeout(function(){e.setAttribute("style","transition: background-color 2s, opacity 2s; background-color: ".concat(n.state.bgcolor))},1e3)},n.state={room:e.match.params.room,id:null,bgcolor:g()},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.socket=f()("localhost:3010"),this.socket.on("connect",function(){e.socket.emit("room",e.state.room),e.setState({id:e.socket.id})}),this.socket.on("feedback",function(t){"failure"===t&&e.onFailure(),"success"===t&&e.onSuccess(),"round"===t&&e.onSuccess()})}},{key:"render",value:function(){return a.a.createElement("div",{className:"screenbutton",style:{backgroundColor:this.state.bgcolor},onClick:this.submitTap})}}]),t}(a.a.Component),k=n(47),v=n.n(k),y=function e(){var t=this;Object(s.a)(this,e),this.newGame=function(e,n){return t.service.post("/newGame",{name:e,creator:n}).then(function(e){return e.data})},this.service=v.a.create({baseURL:"".concat("https://simontaps.herokuapp.com/api","/game"),withCredentials:!0})},E=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(i.a)(this,Object(l.a)(t).call(this,e))).newGame=function(e){n.service.newGame(e,"5bbe158395b68f1bcbe52963").then(function(e){n.setState({game:e.name})}).catch(function(e){return console.log(e)})},n.requestButtons=function(){n.socket.emit("get buttons")},n.play=function(e){var t=n.state,o=t.roundSequence,a=t.sequence,c=t.round;o.length===a.length?(c++,a.push(e),n.socket.emit("feedback",{id:e,feedback:"round"}),n.setState({sequence:a,roundSequence:[],round:c,message:"new round"})):(o.push(e),n.checkSequence(o,a)?(n.socket.emit("feedback",{id:e,feedback:"success"}),o.length===a.length?n.setState({roundSequence:o,message:"add button to the sequence"}):n.setState({roundSequence:o,message:"keep on"})):(n.socket.emit("feedback",{id:e,feedback:"failure"}),n.setState({message:"you lost",sequence:[],roundSequence:[],round:0})))},n.checkSequence=function(e,t){return console.log("CHECKING IF THIS"),console.log(t[e.length-1]),console.log("EQUALS THIS"),console.log(e[e.length-1]),t[e.length-1]===e[e.length-1]},n.componentDidUpdate=function(){console.log("updated"),console.log("Round ".concat(n.state.round)),console.log("Round sequence: ".concat(n.state.roundSequence)),console.log("Total sequence: ".concat(n.state.sequence))},n.service=new y,n.state={room:e.match.params.room,game:null,buttons:null,sequence:[],roundSequence:[],round:0,message:"push first button of the sequence to start"},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.socket=f()("localhost:3010"),this.socket.on("connect",function(){e.socket.emit("room",e.state.room)}),this.socket.on("get buttons",function(t){e.setState({buttons:t})}),this.socket.on("sequence",function(t){e.play(t)})}},{key:"render",value:function(){return a.a.createElement("div",{className:"Game"},a.a.createElement("div",{style:{position:"fixed",width:"100%"}},a.a.createElement("div",null,this.state.round),a.a.createElement("div",null,this.state.message)),a.a.createElement(h.a,{exact:!0,path:"/game/:room",component:p}))}}]),t}(o.Component),S=n(112),j=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(l.a)(t).call(this))).handleFormSubmit=function(t){t.preventDefault();var n=e.state.name;console.log(n),e.props.createGame(n)},e.handleChange=function(t){var n=t.target.value;e.setState({name:n})},e.state={name:""},e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement("div",null,a.a.createElement("h3",null,"New game"),a.a.createElement("form",{onSubmit:this.handleFormSubmit},a.a.createElement("fieldset",null,a.a.createElement("label",null,"Game name:"),a.a.createElement("input",{type:"text",name:"name",value:this.state.name,onChange:function(t){return e.handleChange(t)}})),a.a.createElement("input",{type:"submit",value:"Create game"})),a.a.createElement("h1",null,this.state.error?"Error":""))}}]),t}(o.Component),O=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(l.a)(t).call(this))).handleSubmit=function(t){e.setState({room:t})},e.state={room:null},e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement(h.a,{exact:!0,path:"/",render:function(){return e.state.room?a.a.createElement(S.a,{to:"/game/".concat(e.state.room)}):a.a.createElement(j,{createGame:function(t){return e.handleSubmit(t)}})}})}}]),t}(o.Component),q=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"App"},a.a.createElement(d.a,null,a.a.createElement(h.a,{exact:!0,path:"/",component:O}),a.a.createElement(h.a,{exact:!0,path:"/game/:room",component:E}),a.a.createElement(h.a,{exact:!0,path:"/:room",component:p})))}}]),t}(o.Component),w=n(111);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(a.a.createElement(w.a,null,a.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},48:function(e,t,n){e.exports=n(110)},53:function(e,t,n){},55:function(e,t,n){},84:function(e,t){},87:function(e,t,n){}},[[48,2,1]]]);
//# sourceMappingURL=main.0dcba378.chunk.js.map